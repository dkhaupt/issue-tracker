# issue-tracker
RESTful API for basic issue tracker. Implemented with Hapi & MongoDB

# Requirements

1. Clone repo & install dependencies: `npm install`
1. Start MongoDB server
   * `issue-tracker` looks for a server running locally on port 27017. The URL can be configured in `server.js`
1. Start `issue-tracker` server: `node server.js`
   * By default, `issue-tracker` runs locally on port 3000. This can be configured in `server.js`


# Models

Issue

* **Title**: Text title of the Issue

* **Description**: Text description of the Issue

* **Files** (optional): Files which have been uploaded & associated to the Issue

File

* **filePath**: relative API URL of the file.
  * example: File with `id = 1` and `filename = test_file.txt` has `filePath = issues/1/test_file.txt`
  * This can be appended directly to the API root used by the client, such as `https://issues.company.com/`, for direct download by issuing a `GET` request to `https://issues.company.com/issues/1/test_file.txt`

* **Description**: Text description of the file. If none is provided at upload time, the filename is used.

* **Issue**: The Issue to which the File is associated

# Endpoints - Main
`/documentation` (`GET`): Displays autogenerated [OpenAPI](https://www.openapis.org/) documentation for all endpoints

`/issues` (`GET`): Returns a list of all Issues. Should any Issues have associated Files, that information is included.

`/issues` (`POST`): Create a new Issue. Returns a success message and the created Issue

  ##### Parameters:

   * `title`: Name of the issue

   * `description`: Detail about the issue

   * `file (optional)`: One or more files to be associated to the issue. The payload key must be named `file`.

`/issues/{id}` (`GET`): Returns details for a single Issue `id`

`/issues/{id}/files` (`POST`): Associates 1+ files to Issue `id`. Returns a success message and the created File

  ##### Parameters:

   * `file`: File(s) to be associated with Issue `id`. The payload key must be named `file`.

   * `description (optional)`: Detail about the file

`/issues/{id}/{filename}` (`GET`): Download the file `filename` associated to issue `id`. 
* This is the relative path stored as `filePath`

# Endpoints - Accessory
These endpoints are intended for use by admins and/or future features of the client beyond the original scope

`/files` (`GET`): Returns a list of all Files

`/issues/{id}/files`: (`GET`): Returns information about all Files associated to Issue `id`. 
* Note: this does not download all Files associated to Issue `id`, but returns the relevant File data for potential use by the client

`/issues/{id}/files/{fileId}`: (`GET`): Returns information about File `fileId` associated to Issue `id`


